# This is a sample build configuration for .NET Core.
# Check our guides at https://confluence.atlassian.com/x/5Q4SMw for more examples.
# Only use spaces to indent your .yml configuration.
# -----
# You can specify a custom docker image from Docker Hub as your build environment.
image: microsoft/dotnet:sdk

pipelines:
  default:
    - step:
        name: Publish
        deployment: test
        caches:
          - dotnetcore
        script:
          - dotnet publish SIVA
        artifacts:
          - SIVA/bin/Debug/netcoreapp2.0/**
    - step:
        name: Publish on Windows
        deployment: staging
        caches:
          - dotnetcore
        script:
          - dotnet publish SIVA -r win-x86
        artifacts:
          - SIVA/bin/Debug/netcoreapp2.0/publish/win-x86/**
    - step:
        name: Publish on All
        deployment: production
        caches:
          - dotnetcore
        script:
          - dotnet publish SIVA -r win-x86
          - dotnet publish SIVA -r linux-x64
          - dotnet publish SIVA -r osx-x64
        artifacts:
          - SIVA/bin/Debug/netcoreapp2.0/publish/win-x86/**
          - SIVA/bin/Debug/netcoreapp2.0/publish/osx-x64/**
          - SIVA/bin/Debug/netcoreapp2.0/publish/linux-x64/**